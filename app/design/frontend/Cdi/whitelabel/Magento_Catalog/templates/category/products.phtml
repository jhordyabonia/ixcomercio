<?php
/**
 * Copyright Â© Magento, Inc. All rights reserved.
 * See COPYING.txt for license details.
 */

// @codingStandardsIgnoreFile

?>
<?php
/**
 * Category view template
 *
 * @var $block \Magento\Catalog\Block\Category\View
 */
?>
<?php
    $_category  = $block->getCurrentCategory();
?>
<?php if ((!$block->isContentMode() || $block->isMixedMode()) && count($_category->getChildrenCategories()==0) ): ?>
    <?= $block->getProductListHtml() ?>
<?php else: ?>
entra
    <?php
        $_subcategory  = $_category->getChildrenCategories();
        $_helper    = $this->helper('Magento\Catalog\Helper\Output');
        $objectManager = \Magento\Framework\App\ObjectManager::getInstance();
    ?>
    <section class="category-image">
        <div class="row">
            <?php foreach ($_subcategory as $key => $subcategory): ?>
                <div class="col-sm-6">
                    <?php
                        $category = $objectManager->create('Magento\Catalog\Model\Category')->load($subcategory->getId());
                        $_imgHtml   = '';
                        if ($_imgUrl = $category->getImageUrl()) {
                            $_imgHtml = '<div class="category-image"><img src="' . $_imgUrl . '" alt="' . $block->escapeHtml($category->getName()) . '" title="' . $block->escapeHtml($category->getName()) . '" class="image" /></div>';
                            $_imgHtml = $_helper->categoryAttribute($category, $_imgHtml, 'image');
                            /* @escapeNotVerified */ echo $_imgHtml;
                        }
                    ?>
                    <div class="category-data">
                        <h2><?php echo $category->getName(); ?></h2>
                        <p><?php echo $_helper->categoryAttribute($category, $category->getDescription(), 'description'); ?></p>
                    </div>
                </div>
            <?php endforeach; ?>
        </div>
    </section>
<?php endif; ?>
