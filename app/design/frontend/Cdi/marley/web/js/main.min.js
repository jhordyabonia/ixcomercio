require(["jquery"],function(k,e){"use strict";var C=jQuery("header").innerHeight(),j=jQuery(window).width(),Q=k(".block-minicart .product-item");k(document).ready(function(){if(Q=Q.length,j<=959?k("html body").css("paddingTop",C):k("html body").css("paddingTop",0),k("#scroll-to-top").click(function(){k("html, body").animate({scrollTop:0},500,"swing")}),j<=768){var e=k("#search-wrapper-mobile .block-search"),t=k("#mini-cart-wrapper-mobile .minicart-wrapper");0==k(e).length&&k("#search-wrapper-mobile").append(k(".block-search")),0==k(t).length&&k("#mini-cart-wrapper-mobile").append(k(".minicart-wrapper"))}else k(e).remove(),k(t).remove();if(k(".products-grid .product-items").length){var a=k(".products-grid .product-items > .item"),i=k(a).find(".product-image-wrapper"),n=k(a).find(".product-name"),r=k(a).find(".atributo-familia"),o=k(a).find(".price-box"),s=[],d=[],l=[],p=[],c=[];setTimeout(function(){jQuery.each(i,function(e,t){d.push(jQuery(t).innerHeight())}),Math.max.apply(Math,d),jQuery(i).css("minHeight",Math.max.apply(Math,d)+"px"),jQuery.each(n,function(e,t){l.push(jQuery(t).innerHeight())}),Math.max.apply(Math,l),jQuery(n).css("minHeight",Math.max.apply(Math,l)+"px"),jQuery.each(r,function(e,t){p.push(jQuery(t).innerHeight())}),Math.max.apply(Math,p),jQuery(r).css("minHeight",Math.max.apply(Math,p)+"px"),jQuery.each(o,function(e,t){c.push(jQuery(t).innerHeight())}),Math.max.apply(Math,c),jQuery(o).css("minHeight",Math.max.apply(Math,c)+"px"),jQuery.each(a,function(e,t){s.push(jQuery(t).innerHeight())}),Math.max.apply(Math,s),jQuery(a).css("height",Math.max.apply(Math,s)+"px")},500)}if(jQuery(".control-qty").on("click",function(e){var t=jQuery(this),a=t.parent(),i=a.find("input.input-text.qty"),n=parseInt(i.val());t.hasClass("remove")?2<=n&&(i.val(n-1),2==n&&t.addClass("disable")):t.hasClass("add")&&(i.val(n+1),a.find(".remove").removeClass("disable"))}),k("header.header-primary-container .mobnav-trigger-wrapper .mobnav-trigger").click(function(){jQuery("header.header-primary-container .wrapper-nav").css("top",C+"px"),k(this).hasClass("open")?(k(this).removeClass("open"),k("header.header-primary-container .wrapper-nav").slideUp()):(k(this).addClass("open"),k("header.header-primary-container .wrapper-nav").slideDown())}),k("footer .footer-primary .row>div h3").click(function(){k(this).hasClass("open")?(k(this).removeClass("open"),k(this).parent().find("ul").slideUp()):(k("footer .footer-primary .row > div h3").removeClass("open"),k("footer .footer-primary .row > div ul").slideUp(),k(this).addClass("open"),k(this).parent().find("ul").slideDown())}),jQuery(".hero-banner")){var u=jQuery(".hero-banner .text-overlay-banner");jQuery(".hero-banner .text-block-banner").prepend(u),jQuery(u).addClass("show")}var f=k(".skip-content"),h=k(".skip-link");h.on("click",function(e){e.preventDefault();var t=k(this),a=t.attr("href"),i=k(a),n=i.hasClass("skip-active")?1:0;h.removeClass("skip-active"),f.removeClass("skip-active"),n?t.removeClass("skip-active"):(t.addClass("skip-active"),i.addClass("skip-active"))});var m,g,v=k("input.required-entry, select.required-entry");function y(e,a,t){if(k(e).length&&a.length){var i=k(e).val(),n=k(a).find("option");n.length?"text"==t?k.each(n,function(e,t){k(t).text()==i&&(k(t).prop("selected",!0),setTimeout(function(){k(a).trigger("change")},500))}):"val"==t&&k.each(n,function(e,t){k(t).attr("value")==i&&(k(t).prop("selected",!0),setTimeout(function(){k(a).trigger("change")},500))}):console.log("el ws no retornÃ³ opciones para "+k(a).attr("id"))}}function b(o,e){k("body").trigger("processStart"),k(o).find('input[name="postcode"]').parents(".field").hide(),k(o).find('input[name="postcode"]').val("");var s=k(o).find("> .field.street .control .additional .control"),d=k(o).find(e).parent();k(s).find("input").hide(),k(d).find("input").hide(),g=k(o).find('> .field input[name="city"]').parent(),k.ajax({url:"/places/search/",type:"GET",dataType:"json",success:function(t){if(k(m).find("input").length){k(m).find("input").hide();var a='<select id="fieldStateCheckout" class="select" name="state_id" aria-required="true" aria-invalid="false"><option data-title="" value="">'+k.mage.__("Please select a region, state or province.")+"</option>";k.each(t,function(e,t){a+="<option value='' parentid='"+t.Id+"''>"+t.Name+"</option>"}),a+="</select>",k(m).append(a),y(k(o).find("#region"),k(o).find("#fieldStateCheckout"),"text")}else{var e=k(m).find("select option");k.each(e,function(e,a){var i=k(a).text();k.each(t,function(e,t){t.Name==i&&(k(a).attr("parentId",t.Id),k(a).show())})})}k(g).find("input").hide();var i='<select id="fieldCityCheckout" class="select" name="cities_id" aria-required="true" aria-invalid="false" disabled><option data-title="" value="">'+k.mage.__("Please select a city.")+"</option></select>";k(g).append(i);var n='<select id="fieldZoneCheckout" class="select" name="zone_id" aria-required="true" aria-invalid="false" disabled><option data-title="" value="">'+k.mage.__("Please select a zone.")+"</option></select>";k(d).append(n),k("body").trigger("processStop");var r=k(m).find("select#fieldStateCheckout");k(r).on("change",function(e){k("body").trigger("processStart"),k(o).find('input[name="postcode"]').val(""),k.ajax({url:"/places/search/",data:"parentId="+k(r).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){k(g).find("select").attr("disabled",!1),k(g).find('select option:not([value=""])').remove(),k.each(e,function(e,t){k(g).find("select").append("<option value='"+t.Id+"' parentId='"+t.Id+"'>"+t.Name+"</option>")}),y("#city","#fieldCityCheckout","text"),k("body").trigger("processStop")}});var t=k(m).find("select#fieldStateCheckout option:selected");k(m).find("input").val(k(t).text()),k(m).find("input").keyup()}),k(o).find("#fieldCityCheckout").on("change",function(e){k("body").trigger("processStart"),k(o).find('input[name="postcode"]').val("");var t=k(g).find("select option:selected");k(g).find("input").val(k(t).text()),k(g).find("input").keyup(),k.ajax({url:"/places/search/",data:"parentId="+k(this).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){k(d).find("select").attr("disabled",!1),k(d).find("select option").remove(),k(d).find("select").append('<option data-title="" value="" selected>Please select a zone.</option>'),k.each(e,function(e,t){k(d).find("select").append("<option value='"+t.PostalCode+"' parentId='"+t.ParentId+"' postalCode='"+t.PostalCode+"'>"+t.Name+"</option>")}),y("#zone_id","#fieldZoneCheckout","val"),k("body").trigger("processStop")}})}),k(d).find("select").on("change",function(e){k("body").trigger("processStart");var t=k(d).find("select option:selected");k(d).find("input").val(k(this).find("option:selected").text()),k(d).find("input").keyup(),k(s).find("input").val(k(t).text()),k(s).find("input").keyup(),"null"!=k(t).attr("postalCode")?(k(o).find('input[name="postcode"]').show(),k(o).find('input[name="postcode"]').val(k(t).attr("postalCode"))):(k(o).find('input[name="postcode"]').hide(),k(o).find('input[name="postcode"]').val(k(t).text())),k(o).find('input[name="postcode"]').keyup(),k("body").trigger("processStop")})}})}k.each(v,function(e,t){k(t).parents(".field").hasClass("required")||k(t).parents(".field").addClass("required")}),-1<window.location.href.indexOf("checkout")&&(intervalState=setInterval(function(){m=k('form .fieldset.address input[name="region"]').parent(),1<=k(m).length&&(b("form .fieldset.address",'> .field input[name="custom_attributes[zone_id]"]'),clearInterval(intervalState))},1e3)),-1<window.location.href.indexOf("customer")&&(intervalState=setInterval(function(){m=k('form.form-address-edit .fieldset input[name="region"]').parent(),1<=k(m).length&&(getWSData(),k(".form-address-edit .field-name-firstname").before(k(".field-identification")),b("form.form-address-edit .fieldset",'.field input[name="zone_id"]'),clearInterval(intervalState))},1e3));var x=0;k(document).on("change","[name='billing-address-same-as-shipping']",function(){0==k(".field-select-billing select").length?(x+=1,0==k(this).prop("checked")&&(m=k('.billing-address-form form fieldset.address input[name="region"]').parent(),1<=k(m).length&&1==x&&b(k(".billing-address-form form fieldset.address"),'> .field input[name="custom_attributes[zone_id]"]'))):x=0}),k(document).on("change","[name='billing_address_id']",function(){x+=1,m=k('.billing-address-form form fieldset.address input[name="region"]').parent(),x<=1&&b(k(".billing-address-form form fieldset.address"),'> .field input[name="custom_attributes[zone_id]"]')}),k(document).on("change","[name='country_id']",function(){"GT"==k(this).val()?k('input[name="postcode"]').parents(".field").hide():k('input[name="postcode"]').parents(".field").show()});var w=k("footer a");k.each(w,function(e,t){if("Zendesk Support"==t.innerText||"Preguntas frecuentes"==t.innerText){var a=k(this).parent();k("footer .col-md-3:eq(0) .nav-submenu").append(a)}})});var t,a=0;return k(document).ajaxComplete(function(){""!=k(".totals.sub .price").text()&&1==(a+=1)&&function(){var e=k(".cart.table-wrapper .items>.item .col.subtotal .price"),i=0;k.each(e,function(e,t){var a=k(t).text().split(/\s+/);k.each(a,function(e,t){var a=t.replace(/\./g,"");a=a.replace(/\,/g,"."),1==k.isNumeric(parseFloat(a))&&(i+=parseFloat(a))})}),console.log(i),console.log(Number(i).toFixed(2));var t=k(".totals.sub .price").text().split(/\s+/),n=0;k.each(t,function(e,t){var a=t.replace(/\./g,"");a=a.replace(/\,/g,"."),1==k.isNumeric(a)&&(n+=parseFloat(a))}),console.log(n),console.log(Number(n).toFixed(2));var a=k(".totals-tax-summary .price").text().split(/\s+/),r=0;k.each(a,function(e,t){var a=t.replace(/\./g,"");a=a.replace(/\,/g,"."),1==k.isNumeric(a)&&(r+=parseFloat(a))}),console.log(r),console.log(Number(r).toFixed(2)),console.log(Number(n+r).toFixed(2)),Number(i).toFixed(2)!=Number(n+r).toFixed(2)?(console.log("dif"),k(".cart-container form.form-cart .cart.main.actions .action.update").trigger("click")):console.log("similar")}()}),jQuery(window).on("scroll",function(){clearTimeout(t),t=setTimeout(function(){100<k(this).scrollTop()?k("#scroll-to-top").fadeIn():k("#scroll-to-top").fadeOut()},500)}),jQuery(window).on("resize",function(){if(C=jQuery("header").innerHeight(),j<=959?k("html body").css("paddingTop",C):k("html body").css("paddingTop",0),j<=768){var e=k("#search-wrapper-mobile .block-search"),t=k("#mini-cart-wrapper-mobile .minicart-wrapper");0==k(e).length&&k("#search-wrapper-mobile").append(k(".block-search")),0==k(t).length&&k("#mini-cart-wrapper-mobile").append(k(".minicart-wrapper"))}else k(e).remove(),k(t).remove()}),e});