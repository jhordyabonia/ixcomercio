require(["jquery"],function(Q,e){"use strict";var T=jQuery("header").innerHeight(),M=jQuery(window).width(),S=Q(".block-minicart .product-item");Q(document).ready(function(){if(S=S.length,M<=959?Q("html body").css("paddingTop",T):Q("html body").css("paddingTop",0),Q("#scroll-to-top").click(function(){Q("html, body").animate({scrollTop:0},500,"swing")}),M<=768){var e=Q("#search-wrapper-mobile .block-search"),t=Q("#mini-cart-wrapper-mobile .minicart-wrapper");0==Q(e).length&&Q("#search-wrapper-mobile").append(Q(".block-search")),0==Q(t).length&&Q("#mini-cart-wrapper-mobile").append(Q(".minicart-wrapper"))}else Q(e).remove(),Q(t).remove();if(Q(".products-grid .product-items").length){var a=Q(".products-grid .product-items > .item"),i=Q(a).find(".product-image-wrapper"),r=Q(a).find(".product-name"),n=Q(a).find(".atributo-familia"),o=Q(a).find(".price-box"),s=[],p=[],c=[],d=[],l=[];setTimeout(function(){jQuery.each(i,function(e,t){p.push(jQuery(t).innerHeight())}),Math.max.apply(Math,p),jQuery(i).css("minHeight",Math.max.apply(Math,p)+"px"),jQuery.each(r,function(e,t){c.push(jQuery(t).innerHeight())}),Math.max.apply(Math,c),jQuery(r).css("minHeight",Math.max.apply(Math,c)+"px"),jQuery.each(n,function(e,t){d.push(jQuery(t).innerHeight())}),Math.max.apply(Math,d),jQuery(n).css("minHeight",Math.max.apply(Math,d)+"px"),jQuery.each(o,function(e,t){l.push(jQuery(t).innerHeight())}),Math.max.apply(Math,l),jQuery(o).css("minHeight",Math.max.apply(Math,l)+"px"),jQuery.each(a,function(e,t){s.push(jQuery(t).innerHeight())}),Math.max.apply(Math,s),jQuery(a).css("height",Math.max.apply(Math,s)+"px")},500)}if(jQuery(".control-qty").on("click",function(e){var t=jQuery(this),a=t.parent(),i=a.find("input.input-text.qty"),r=parseInt(i.val());t.hasClass("remove")?2<=r&&(i.val(r-1),2==r&&t.addClass("disable")):t.hasClass("add")&&(i.val(r+1),a.find(".remove").removeClass("disable"))}),Q("header.header-primary-container .mobnav-trigger-wrapper .mobnav-trigger").click(function(){jQuery("header.header-primary-container .wrapper-nav").css("top",T+"px"),Q(this).hasClass("open")?(Q(this).removeClass("open"),Q("header.header-primary-container .wrapper-nav").slideUp()):(Q(this).addClass("open"),Q("header.header-primary-container .wrapper-nav").slideDown())}),Q("footer .footer-primary .row>div h3").click(function(){Q(this).hasClass("open")?(Q(this).removeClass("open"),Q(this).parent().find("ul").slideUp()):(Q("footer .footer-primary .row > div h3").removeClass("open"),Q("footer .footer-primary .row > div ul").slideUp(),Q(this).addClass("open"),Q(this).parent().find("ul").slideDown())}),jQuery(".hero-banner")){var u=jQuery(".hero-banner .text-overlay-banner");jQuery(".hero-banner .text-block-banner").prepend(u),jQuery(u).addClass("show")}var f=Q(".skip-content"),h=Q(".skip-link");h.on("click",function(e){e.preventDefault();var t=Q(this),a=t.attr("href"),i=Q(a),r=i.hasClass("skip-active")?1:0;h.removeClass("skip-active"),f.removeClass("skip-active"),r?t.removeClass("skip-active"):(t.addClass("skip-active"),i.addClass("skip-active"))});var m=Q("input.required-entry, select.required-entry");Q.each(m,function(e,t){Q(t).parents(".field").hasClass("required")||Q(t).parents(".field").addClass("required")});var y,g,v=Q("form .fieldset > .field.region #region_id");function b(){Q("body").trigger("processStart"),Q.ajax({url:"/places/search/",type:"GET",dataType:"json",success:function(e){Q(v).find('option:not([value=""])').remove(),Q.each(e,function(e,t){Q(v).append("<option value='"+t.Id+"' parentid='"+t.Id+"'>"+t.Name+"</option>")}),Q(v).show(),Q(v).attr("disabled",!1),Q("input#region").hide(),Q("body").trigger("processStop")}})}Q(v).length&&(g=setInterval(function(){y=Q(v).find("option"),1<=Q(y).length&&(b(),clearInterval(g))},1e3));var x=Q("form .fieldset > .field.country #country");Q(x).change(function(){b()});var j,w,k=Q("form .fieldset > .field.city #city_id"),C=Q("form .fieldset > .field.street-zone .control");v.on("change",function(e){Q("body").trigger("processStart"),Q.ajax({url:"/places/search/",data:"parentId="+v.find("option:selected").attr("parentid"),type:"GET",dataType:"json",success:function(e){Q(k).find('option:not([value=""])').remove(),Q.each(e,function(e,t){Q(k).append("<option value='"+t.Id+"' parentid='"+t.Id+"'>"+t.Name+"</option>")}),Q("body").trigger("processStop")}});var t=Q(v).find("option:selected");Q(v).parent().find("input").val(Q(t).text()),Q(v).parent().find("input").keyup()}),Q("#city_id").on("change",function(e){Q("body").trigger("processStart"),Q.ajax({url:"/places/search/",data:"parentId="+Q("#city_id").find("option:selected").attr("parentid"),type:"GET",dataType:"json",success:function(e){Q(C).find('select option:not([value=""])').remove(),Q.each(e,function(e,t){Q(C).find("select").append("<option value='"+t.ParentId+"' parentid='"+t.ParentId+"' postalcode='"+t.PostalCode+"'>"+t.Name+"</option>")}),Q("body").trigger("processStop")}});var t=Q("#city_id").find("option:selected");Q("#city_id").parent().find("input").val(Q(t).text()),Q("#city_id").parent().find("input").keyup()}),C.on("change",function(e){Q("body").trigger("processStart");var t=Q(C).find("option:selected");Q("#zip").val(Q(t).attr("postalcode")),Q("#zip").keyup(),Q("body").trigger("processStop")}),-1<window.location.href.indexOf("checkout")&&(g=setInterval(function(){w=Q('form .fieldset > .field[name="shippingAddress.region_id"] .control'),1<=Q(w).length&&(function(){Q("body").trigger("processStart");var r=Q("form .fieldset > .field.street .control .additional .control"),n=Q('form .fieldset > .field select[name="custom_attributes[zone_id]"]');Q(r).find("input").hide(),j=Q('form .fieldset > .field[name="shippingAddress.city"] .control'),Q.ajax({url:"/places/search/",type:"GET",dataType:"json",success:function(t){if(Q(w).find("input").length){Q(w).find("input").hide();var a='<select id="fieldStateCheckout" class="select" name="state_id" aria-required="true" aria-invalid="false"><option data-title="" value="">Please select a region, state or province.</option>';Q.each(t,function(e,t){a+="<option value='' parentid='"+t.Id+"''>"+t.Name+"</option>"}),a+="</select>",Q(w).append(a)}else{var e=Q(w).find("select option");Q.each(e,function(e,a){var i=Q(a).text();Q.each(t,function(e,t){t.Name==i&&(Q(a).attr("parentId",t.Id),Q(a).show())})})}Q(j).find("input").hide(),Q(j).append('<select id="fieldCityCheckout" class="select" name="cities_id" aria-required="true" aria-invalid="false"><option data-title="" value="">Please select a city.</option></select>'),Q("body").trigger("processStop");var i=Q(w).find("select");Q(i).on("change",function(e){Q("body").trigger("processStart"),Q.ajax({url:"/places/search/",data:"parentId="+Q(i).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){Q(j).find('select option:not([value=""])').remove(),Q.each(e,function(e,t){Q(j).find("select").append("<option value='"+t.Id+"' parentId='"+t.Id+"'>"+t.Name+"</option>")}),Q("body").trigger("processStop")}});var t=Q(w).find("select option:selected");Q(w).find("input").val(Q(t).text()),Q(w).find("input").keyup()}),Q("#fieldCityCheckout").on("change",function(e){Q("body").trigger("processStart");var t=Q(j).find("select option:selected");Q(j).find("input").val(Q(t).text()),Q(j).find("input").keyup(),Q.ajax({url:"/places/search/",data:"parentId="+Q("#fieldCityCheckout").find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){Q(n).find("option").remove(),Q(n).append('<option data-title="" value="" selected>Please select a zone.</option>'),Q.each(e,function(e,t){Q(n).append("<option value='"+t.ParentId+"' parentId='"+t.ParentId+"' postalCode='"+t.PostalCode+"'>"+t.Name+"</option>")}),Q("body").trigger("processStop")}})}),Q('select[name="custom_attributes[zone_id]"]').on("change",function(e){Q("body").trigger("processStart");var t=Q('select[name="custom_attributes[zone_id]"]').find("option:selected");Q(r).find("input").val(Q(t).text()),Q(r).find("input").keyup(),Q('input[name="postcode"]').val(Q(t).attr("postalCode")),Q('input[name="postcode"]').keyup(),Q("body").trigger("processStop")})}})}(),clearInterval(g))},1e3));var I=Q("footer a");Q.each(I,function(e,t){if("Zendesk Support"==t.innerText||"Preguntas frecuentes"==t.innerText){var a=Q(this).parent();Q("footer .col-md-3:eq(0) .nav-submenu").append(a)}})});var t,a=0;return Q(document).ajaxComplete(function(){""!=Q(".totals.sub .price").text()&&1==(a+=1)&&function(){var e=Q(".cart.table-wrapper .items>.item .col.subtotal .price"),i=0;Q.each(e,function(e,t){var a=Q(t).text().split(/\s+/);Q.each(a,function(e,t){var a=t.replace(/\./g,"");a=a.replace(/\,/g,"."),1==Q.isNumeric(parseFloat(a))&&(i+=parseFloat(a))})}),console.log(i),console.log(Number(i).toFixed(2));var t=Q(".totals.sub .price").text().split(/\s+/),r=0;Q.each(t,function(e,t){var a=t.replace(/\./g,"");a=a.replace(/\,/g,"."),1==Q.isNumeric(a)&&(r+=parseFloat(a))}),console.log(r),console.log(Number(r).toFixed(2));var a=Q(".totals-tax-summary .price").text().split(/\s+/),n=0;Q.each(a,function(e,t){var a=t.replace(/\./g,"");a=a.replace(/\,/g,"."),1==Q.isNumeric(a)&&(n+=parseFloat(a))}),console.log(n),console.log(Number(n).toFixed(2)),console.log(Number(r+n).toFixed(2)),Number(i).toFixed(2)!=Number(r+n).toFixed(2)?(console.log("dif"),Q(".cart-container form.form-cart .cart.main.actions .action.update").trigger("click")):console.log("similar")}()}),jQuery(window).on("scroll",function(){clearTimeout(t),t=setTimeout(function(){100<Q(this).scrollTop()?Q("#scroll-to-top").fadeIn():Q("#scroll-to-top").fadeOut()},500)}),jQuery(window).on("resize",function(){if(T=jQuery("header").innerHeight(),M<=959?Q("html body").css("paddingTop",T):Q("html body").css("paddingTop",0),M<=768){var e=Q("#search-wrapper-mobile .block-search"),t=Q("#mini-cart-wrapper-mobile .minicart-wrapper");0==Q(e).length&&Q("#search-wrapper-mobile").append(Q(".block-search")),0==Q(t).length&&Q("#mini-cart-wrapper-mobile").append(Q(".minicart-wrapper"))}else Q(e).remove(),Q(t).remove()}),e});