require(["jquery"],function(M,e){"use strict";var S=jQuery("header").innerHeight(),N=jQuery(window).width(),_=M(".block-minicart .product-item");M(document).ready(function(){if(_=_.length,N<=959?M("html body").css("paddingTop",S):M("html body").css("paddingTop",0),M("#scroll-to-top").click(function(){M("html, body").animate({scrollTop:0},500,"swing")}),N<=768){var e=M("#search-wrapper-mobile .block-search"),t=M("#mini-cart-wrapper-mobile .minicart-wrapper");0==M(e).length&&M("#search-wrapper-mobile").append(M(".block-search")),0==M(t).length&&M("#mini-cart-wrapper-mobile").append(M(".minicart-wrapper"))}else M(e).remove(),M(t).remove();if(M(".products-grid .product-items").length){var a=M(".products-grid .product-items > .item"),i=M(a).find(".product-image-wrapper"),n=M(a).find(".product-name"),r=M(a).find(".atributo-familia"),o=M(a).find(".price-box"),s=[],p=[],d=[],c=[],l=[];setTimeout(function(){jQuery.each(i,function(e,t){p.push(jQuery(t).innerHeight())}),Math.max.apply(Math,p),jQuery(i).css("minHeight",Math.max.apply(Math,p)+"px"),jQuery.each(n,function(e,t){d.push(jQuery(t).innerHeight())}),Math.max.apply(Math,d),jQuery(n).css("minHeight",Math.max.apply(Math,d)+"px"),jQuery.each(r,function(e,t){c.push(jQuery(t).innerHeight())}),Math.max.apply(Math,c),jQuery(r).css("minHeight",Math.max.apply(Math,c)+"px"),jQuery.each(o,function(e,t){l.push(jQuery(t).innerHeight())}),Math.max.apply(Math,l),jQuery(o).css("minHeight",Math.max.apply(Math,l)+"px"),jQuery.each(a,function(e,t){s.push(jQuery(t).innerHeight())}),Math.max.apply(Math,s),jQuery(a).css("height",Math.max.apply(Math,s)+"px")},500)}if(jQuery(".control-qty").on("click",function(e){var t=jQuery(this),a=t.parent(),i=a.find("input.input-text.qty"),n=parseInt(i.val());t.hasClass("remove")?2<=n&&(i.val(n-1),2==n&&t.addClass("disable")):t.hasClass("add")&&(i.val(n+1),a.find(".remove").removeClass("disable"))}),M("header.header-primary-container .mobnav-trigger-wrapper .mobnav-trigger").click(function(){jQuery("header.header-primary-container .wrapper-nav").css("top",S+"px"),M(this).hasClass("open")?(M(this).removeClass("open"),M("header.header-primary-container .wrapper-nav").slideUp()):(M(this).addClass("open"),M("header.header-primary-container .wrapper-nav").slideDown())}),M("footer .footer-primary .row>div h3").click(function(){M(this).hasClass("open")?(M(this).removeClass("open"),M(this).parent().find("ul").slideUp()):(M("footer .footer-primary .row > div h3").removeClass("open"),M("footer .footer-primary .row > div ul").slideUp(),M(this).addClass("open"),M(this).parent().find("ul").slideDown())}),jQuery(".hero-banner")){var u=jQuery(".hero-banner .text-overlay-banner");jQuery(".hero-banner .text-block-banner").prepend(u),jQuery(u).addClass("show")}var f=M(".skip-content"),h=M(".skip-link");h.on("click",function(e){e.preventDefault();var t=M(this),a=t.attr("href"),i=M(a),n=i.hasClass("skip-active")?1:0;h.removeClass("skip-active"),f.removeClass("skip-active"),n?t.removeClass("skip-active"):(t.addClass("skip-active"),i.addClass("skip-active"))});var m=M("input.required-entry, select.required-entry");M.each(m,function(e,t){M(t).parents(".field").hasClass("required")||M(t).parents(".field").addClass("required")});var g,v,y=M("form .fieldset > .field.region #region_id");function b(){M("body").trigger("processStart"),M("#zip").val(""),M.ajax({url:"/places/search/",type:"GET",dataType:"json",success:function(e){M(y).find('option:not([value=""])').remove(),M.each(e,function(e,t){M(y).append("<option value='"+t.Id+"' parentid='"+t.Id+"'>"+t.Name+"</option>")}),M(y).show(),M(y).attr("disabled",!1),M("input#region").hide(),M("body").trigger("processStop")}})}M(y).length&&(v=setInterval(function(){g=M(y).find("option"),1<=M(g).length&&(b(),clearInterval(v))},1e3));var x=M("form .fieldset > .field.country #country");M(x).change(function(){b()});var j,w,k=M("form .fieldset > .field.city #city_id"),C=M("form .fieldset > .field.street-zone .control");function I(n){M("body").trigger("processStart"),"GT"==M(n).find("select[name='country_id']").val()?M(n).find('input[name="postcode"]').parents(".field").hide():M(n).find('input[name="postcode"]').parents(".field").show(),M(n).find('input[name="postcode"]').val("");var r=M(n).find("> .field.street .control .additional .control"),o=M(n).find('> .field input[name="custom_attributes[zone_id]"]').parent();M(r).find("input").hide(),M(o).find("input").hide(),w=M(n).find('> .field input[name="city"]').parent(),M.ajax({url:"/places/search/",type:"GET",dataType:"json",success:function(t){if(M(j).find("input").length){M(j).find("input").hide();var a='<select id="fieldStateCheckout" class="select" name="state_id" aria-required="true" aria-invalid="false"><option data-title="" value="">Please select a region, state or province.</option>';M.each(t,function(e,t){a+="<option value='' parentid='"+t.Id+"''>"+t.Name+"</option>"}),a+="</select>",M(j).append(a)}else{var e=M(j).find("select option");M.each(e,function(e,a){var i=M(a).text();M.each(t,function(e,t){t.Name==i&&(M(a).attr("parentId",t.Id),M(a).show())})})}M(w).find("input").hide();M(w).append('<select id="fieldCityCheckout" class="select" name="cities_id" aria-required="true" aria-invalid="false" disabled><option data-title="" value="">Please select a city.</option></select>');M(o).append('<select id="fieldZoneCheckout" class="select" name="zone_id" aria-required="true" aria-invalid="false" disabled><option data-title="" value="">Please select a zone.</option></select>'),M("body").trigger("processStop");var i=M(j).find("select");M(i).on("change",function(e){M("body").trigger("processStart"),M(n).find('input[name="postcode"]').val(""),M.ajax({url:"/places/search/",data:"parentId="+M(i).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){M(w).find("select").attr("disabled",!1),M(w).find('select option:not([value=""])').remove(),M.each(e,function(e,t){M(w).find("select").append("<option value='"+t.Id+"' parentId='"+t.Id+"'>"+t.Name+"</option>")}),M("body").trigger("processStop")}});var t=M(j).find("select option:selected");M(j).find("input").val(M(t).text()),M(j).find("input").keyup()}),M(n).find("#fieldCityCheckout").on("change",function(e){M("body").trigger("processStart"),M(n).find('input[name="postcode"]').val("");var t=M(w).find("select option:selected");M(w).find("input").val(M(t).text()),M(w).find("input").keyup(),M.ajax({url:"/places/search/",data:"parentId="+M(this).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){M(o).find("select").attr("disabled",!1),M(o).find("select option").remove(),M(o).find("select").append('<option data-title="" value="" selected>Please select a zone.</option>'),M.each(e,function(e,t){M(o).find("select").append("<option value='"+t.ParentId+"' parentId='"+t.ParentId+"' postalCode='"+t.PostalCode+"'>"+t.Name+"</option>")}),M("body").trigger("processStop")}})}),M(o).find("select").on("change",function(e){M("body").trigger("processStart");var t=M(o).find("select option:selected");M(o).find("input").val(M(this).find("option:selected").text()),M(o).find("input").keyup(),M(r).find("input").val(M(t).text()),M(r).find("input").keyup(),"null"!=M(t).attr("postalCode")?M('input[name="postcode"]').val(M(t).attr("postalCode")):M('input[name="postcode"]').val(M(t).text()),M('input[name="postcode"]').keyup(),M("body").trigger("processStop")})}})}y.on("change",function(e){M("body").trigger("processStart"),M("#zip").val(""),M.ajax({url:"/places/search/",data:"parentId="+y.find("option:selected").attr("parentid"),type:"GET",dataType:"json",success:function(e){M(k).find('option:not([value=""])').remove(),M.each(e,function(e,t){M(k).append("<option value='"+t.Id+"' parentid='"+t.Id+"'>"+t.Name+"</option>")}),M("body").trigger("processStop")}});var t=M(y).find("option:selected");M(y).parent().find("input").val(M(t).text()),M(y).parent().find("input").keyup()}),M("#city_id").on("change",function(e){M("body").trigger("processStart"),M("#zip").val(""),M.ajax({url:"/places/search/",data:"parentId="+M("#city_id").find("option:selected").attr("parentid"),type:"GET",dataType:"json",success:function(e){M(C).find('select option:not([value=""])').remove(),M.each(e,function(e,t){M(C).find("select").append("<option value='"+t.ParentId+"' parentid='"+t.ParentId+"' postalcode='"+t.PostalCode+"'>"+t.Name+"</option>")}),M("body").trigger("processStop")}});var t=M("#city_id").find("option:selected");M("#city_id").parent().find("input").val(M(t).text()),M("#city_id").parent().find("input").keyup()}),C.on("change",function(e){M("body").trigger("processStart");var t=M(C).find("option:selected");"null"!=M(t).attr("postalcode")&&M("#zip").hasClass("required-entry")&&(M("#zip").val(M(t).attr("postalcode")),M("#zip").keyup()),M("body").trigger("processStop")}),-1<window.location.href.indexOf("checkout")&&(v=setInterval(function(){j=M('form .fieldset.address input[name="region"]').parent(),1<=M(j).length&&(I("form .fieldset.address"),clearInterval(v))},1e3));var Q=0;M(document).on("change","[name='billing-address-same-as-shipping']",function(){0==M(".field-select-billing select").length?(Q+=1,0==M(this).prop("checked")&&(j=M('.billing-address-form form fieldset.address input[name="region"]').parent(),1<=M(j).length&&1==Q&&I(M(".billing-address-form form fieldset.address")))):Q=0}),M(document).on("change","[name='billing_address_id']",function(){Q+=1,j=M('.billing-address-form form fieldset.address input[name="region"]').parent(),Q<=1&&I(M(".billing-address-form form fieldset.address"))}),M(document).on("change","[name='country_id']",function(){"GT"==M(this).val()?M('input[name="postcode"]').parents(".field").hide():M('input[name="postcode"]').parents(".field").show()});var T=M("footer a");M.each(T,function(e,t){if("Zendesk Support"==t.innerText||"Preguntas frecuentes"==t.innerText){var a=M(this).parent();M("footer .col-md-3:eq(0) .nav-submenu").append(a)}})});var t,a=0;return M(document).ajaxComplete(function(){""!=M(".totals.sub .price").text()&&1==(a+=1)&&function(){var e=M(".cart.table-wrapper .items>.item .col.subtotal .price"),i=0;M.each(e,function(e,t){var a=M(t).text().split(/\s+/);M.each(a,function(e,t){var a=t.replace(/\./g,"");a=a.replace(/\,/g,"."),1==M.isNumeric(parseFloat(a))&&(i+=parseFloat(a))})}),console.log(i),console.log(Number(i).toFixed(2));var t=M(".totals.sub .price").text().split(/\s+/),n=0;M.each(t,function(e,t){var a=t.replace(/\./g,"");a=a.replace(/\,/g,"."),1==M.isNumeric(a)&&(n+=parseFloat(a))}),console.log(n),console.log(Number(n).toFixed(2));var a=M(".totals-tax-summary .price").text().split(/\s+/),r=0;M.each(a,function(e,t){var a=t.replace(/\./g,"");a=a.replace(/\,/g,"."),1==M.isNumeric(a)&&(r+=parseFloat(a))}),console.log(r),console.log(Number(r).toFixed(2)),console.log(Number(n+r).toFixed(2)),Number(i).toFixed(2)!=Number(n+r).toFixed(2)?(console.log("dif"),M(".cart-container form.form-cart .cart.main.actions .action.update").trigger("click")):console.log("similar")}()}),jQuery(window).on("scroll",function(){clearTimeout(t),t=setTimeout(function(){100<M(this).scrollTop()?M("#scroll-to-top").fadeIn():M("#scroll-to-top").fadeOut()},500)}),jQuery(window).on("resize",function(){if(S=jQuery("header").innerHeight(),N<=959?M("html body").css("paddingTop",S):M("html body").css("paddingTop",0),N<=768){var e=M("#search-wrapper-mobile .block-search"),t=M("#mini-cart-wrapper-mobile .minicart-wrapper");0==M(e).length&&M("#search-wrapper-mobile").append(M(".block-search")),0==M(t).length&&M("#mini-cart-wrapper-mobile").append(M(".minicart-wrapper"))}else M(e).remove(),M(t).remove()}),e});