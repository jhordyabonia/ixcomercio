require(["jquery","jquery/ui","mage/translate","mainJs","domReady!"],function(I,e){"use strict";jQuery("#scroll-to-top").click(function(){return jQuery("html, body").animate({scrollTop:0},600,"easeOutCubic"),!1});var T=jQuery(window).width();return I(document).ready(function(){var e=I("input.required-entry, select.required-entry");I.each(e,function(e,t){I(t).parents(".field").hasClass("required")||I(t).parents(".field").addClass("required")});var t=I(".account-cart-wrapper"),a=I("header .block-search");if(T<=768){I("header > .nav-sections").addClass("skip-content"),I(a).addClass("skip-content"),I(".skip-links-wrapper").append(I(t).html()),I("header").append(a);var i=I(".skip-links-wrapper #header-account");I("header").append(i),I(".account-cart-wrapper").remove(),I("header .skip-links-wrapper .minicart-wrapper a.showcart, header .skip-links-wrapper .dropdown-toggle.banderas").click(function(){I("header .skip-links-wrapper .skip-link").removeClass("skip-active"),I("header .skip-links-wrapper .minicart-wrapper a.showcart").removeClass("active")})}var n,p,c,o=I(".skip-content"),r=I(".skip-link");if(r.on("click",function(e){e.preventDefault();var t=I(this),a=t.attr("data-target-element")?t.attr("data-target-element"):t.attr("href"),i=I(a),n=i.hasClass("skip-active")?1:0;r.removeClass("skip-active"),o.removeClass("skip-active"),n?t.removeClass("skip-active"):(t.addClass("skip-active"),i.addClass("skip-active"))}),I(".products-grid .product-items").length){var s=I(".products-grid .product-items > .item"),d=I(s).find(".product-image-wrapper"),l=I(s).find(".product-item-name"),u=I(s).find(".atributo-familia"),f=I(s).find(".product-reviews-summary"),h=I(s).find(".price-box"),m=I(s).find(".swatch-opt"),y=[],v=[],g=[],k=[],j=[],w=[],x=[];setTimeout(function(){jQuery.each(d,function(e,t){v.push(jQuery(t).innerHeight())}),Math.max.apply(Math,v),jQuery(d).css("minHeight",Math.max.apply(Math,v)+"px"),jQuery.each(l,function(e,t){g.push(jQuery(t).innerHeight())}),Math.max.apply(Math,g),jQuery(l).css("minHeight",Math.max.apply(Math,g)+"px"),jQuery.each(u,function(e,t){k.push(jQuery(t).innerHeight())}),Math.max.apply(Math,k),jQuery(u).css("minHeight",Math.max.apply(Math,k)+"px"),jQuery.each(f,function(e,t){j.push(jQuery(t).innerHeight())}),Math.max.apply(Math,j),jQuery(f).css("minHeight",Math.max.apply(Math,j)+"px"),jQuery.each(h,function(e,t){w.push(jQuery(t).innerHeight())}),Math.max.apply(Math,w),jQuery(h).css("minHeight",Math.max.apply(Math,w)+"px"),jQuery.each(m,function(e,t){x.push(jQuery(t).innerHeight())}),Math.max.apply(Math,x),jQuery(m).css("minHeight",Math.max.apply(Math,x)+"px"),jQuery.each(s,function(e,t){y.push(jQuery(t).innerHeight())}),Math.max.apply(Math,y),jQuery(s).css("height",Math.max.apply(Math,y)+"px")},500)}function C(e,a,t){if(I(e).length&&a.length){var i=I(e).val(),n=I(a).find("option");n.length?"text"==t?I.each(n,function(e,t){I(t).text()==i&&(I(t).prop("selected",!0),setTimeout(function(){I(a).trigger("change")},500))}):"val"==t&&I.each(n,function(e,t){I(t).attr("value")==i&&(I(t).prop("selected",!0),setTimeout(function(){I(a).trigger("change")},500))}):console.log("el ws no retornÃ³ opciones para "+I(a).attr("id"))}}function b(r,e){I("body").trigger("processStart"),"GT"==I('[name="country_id"]').val()?I(r).find('input[name="postcode"]').parents(".field").hide():I(r).find('input[name="postcode"]').parents(".field").show(),I(r).find('input[name="postcode"]').val("");var s=I(r).find("> .field.street .control .additional .control"),d=I(r).find(e).parent();I(s).find("input").hide(),I(d).find("input").hide(),c=I(r).find('> .field input[name="city"]').parent(),I.ajax({url:"/places/search/",type:"GET",dataType:"json",success:function(t){if(I(p).find("input").length){I(p).find("input").hide();var a='<select id="fieldStateCheckout" class="select" name="state_id" aria-required="true" aria-invalid="false"><option data-title="" value="">'+I.mage.__("Please select a region, state or province.")+"</option>";I.each(t,function(e,t){a+="<option value='' parentid='"+t.Id+"''>"+t.Name+"</option>"}),a+="</select>",0==I(r).find("#fieldStateCheckout").length&&I(p).append(a),C(I(r).find("#region"),I(r).find("#fieldStateCheckout"),"text")}else{var e=I(p).find("select option");I.each(e,function(e,a){var i=I(a).text();I.each(t,function(e,t){t.Name==i&&(I(a).attr("parentId",t.Id),I(a).show())})})}I(c).find("input").hide();var i='<select id="fieldCityCheckout" class="select" name="cities_id" aria-required="true" aria-invalid="false" disabled><option data-title="" value="">'+I.mage.__("Please select a city.")+"</option></select>";0==I(r).find("#fieldCityCheckout").length&&I(c).append(i);var n='<select id="fieldZoneCheckout" class="select" name="zone_id" aria-required="true" aria-invalid="false" disabled><option data-title="" value="">'+I.mage.__("Please select a zone.")+"</option></select>";0==I(r).find("#fieldZoneCheckout").length&&I(d).append(n),I("body").trigger("processStop");var o=I(p).find("select#fieldStateCheckout");I(o).on("change",function(e){I("body").trigger("processStart"),I(r).find('input[name="postcode"]').val(""),I.ajax({url:"/places/search/",data:"parentId="+I(o).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){I(c).find("select").attr("disabled",!1),I(c).find('select option:not([value=""])').remove(),I.each(e,function(e,t){I(c).find("select").append("<option value='"+t.Id+"' parentId='"+t.Id+"'>"+t.Name+"</option>")}),C("#city","#fieldCityCheckout","text"),I("body").trigger("processStop")}}),I(p).find("input").val(I(this).find("option:selected").text()),I(p).find("input").keyup()}),I(r).find("#fieldCityCheckout").on("change",function(e){I("body").trigger("processStart"),I(r).find('input[name="postcode"]').val("");I(c).find("select option:selected");I(c).find("input").val(I(this).find("option:selected").text()),I(c).find("input").keyup(),I.ajax({url:"/places/search/",data:"parentId="+I(this).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){I(d).find("select").attr("disabled",!1),I(d).find("select option").remove(),I(d).find("select").append('<option data-title="" value="" selected>Please select a zone.</option>'),I.each(e,function(e,t){I(d).find("select").append("<option value='"+t.PostalCode+"' parentId='"+t.ParentId+"' postalCode='"+t.PostalCode+"'>"+t.Name+"</option>")}),C("#zone_id","#fieldZoneCheckout","val"),I("body").trigger("processStop")}})}),I(d).find("select").on("change",function(e){I("body").trigger("processStart");var t=I(d).find("select option:selected");I(d).find("input").val(I(this).find("option:selected").text()),I(d).find("input").keyup(),I(s).find("input").val(I(this).find("option:selected").text()),I(s).find("input").keyup(),"null"!=I(t).attr("postalCode")?(I(r).find('input[name="postcode"]').show(),I(r).find('input[name="postcode"]').val(I(t).attr("postalCode"))):(I(r).find('input[name="postcode"]').hide(),I(r).find('input[name="postcode"]').val(I(t).text())),I(r).find('input[name="postcode"]').keyup(),I("body").trigger("processStop")})}})}jQuery(".control-qty").on("click",function(e){var t=jQuery(this),a=t.parent(),i=a.find("input.input-text.qty"),n=parseInt(i.val());t.hasClass("remove")?2<=n&&(i.val(n-1),2==n&&t.addClass("disable")):t.hasClass("add")&&(i.val(n+1),a.find(".remove").removeClass("disable"))}),-1<window.location.href.indexOf("checkout")&&(n=setInterval(function(){p=I('form .fieldset.address input[name="region"]').parent(),1<=I(p).length&&(b("form .fieldset.address",'> .field input[name="custom_attributes[zone_id]"]'),clearInterval(n))},1e3)),-1<window.location.href.indexOf("customer")&&(n=setInterval(function(){p=I('form.form-address-edit .fieldset input[name="region"]').parent(),1<=I(p).length&&(I(".form-address-edit .field-name-firstname").before(I(".field-identification")),I(".form-address-edit .field-zone_id").after(I(".field.zip")),b("form.form-address-edit .fieldset",'.field input[name="zone_id"]'),clearInterval(n))},1e3));var Q=0;I(document).on("change","[name='billing-address-same-as-shipping']",function(){if(0==I(".field-select-billing select").length){if(Q+=1,0==I(this).prop("checked")){var e=I(".payment-method._active .billing-address-form form fieldset.address");p=I(e).find('input[name="region"]').parent(),console.log("fieldStateCheckout "+p),1<=I(p).length&&1==Q&&b(e,'> .field input[name="custom_attributes[zone_id]"]')}}else Q=0}),I(document).on("change","[name='billing_address_id']",function(){Q+=1,p=I('.billing-address-form form fieldset.address input[name="region"]').parent(),Q<=1&&b(I(".billing-address-form form fieldset.address"),'> .field input[name="custom_attributes[zone_id]"]')}),I(document).on("change","[name='country_id']",function(){"GT"==I(this).val()?I('input[name="postcode"]').parents(".field").hide():I('input[name="postcode"]').parents(".field").show()});var M=I("footer a");I.each(M,function(e,t){if("Zendesk Support"==t.innerText||"Preguntas frecuentes"==t.innerText){var a=I(this).parent();I("footer .footer .footer-nav .second-nav").append(a)}});var _=I(".sticky-product-nav");I(_).length&&(I(".sticky-product-nav").remove(),I(".page-wrapper .page-main>.columns").prepend(_))}),I(document).ajaxComplete(function(){jQuery(".product-options-wrapper .swatch-attribute.jam_color .swatch-attribute-options .swatch-option").hover(function(){var e=jQuery(this).attr("option-label");jQuery(".swatch-attribute-selected-option").text(e)},function(){jQuery(".swatch-attribute-selected-option").text(jQuery(".product-options-wrapper .swatch-attribute.jam_color .swatch-attribute-options .swatch-option.selected").attr("option-label"))})}),jQuery(window).on("scroll",function(){300<jQuery(window).scrollTop()?jQuery("#scroll-to-top").addClass("show"):jQuery("#scroll-to-top").removeClass("show")}),e});