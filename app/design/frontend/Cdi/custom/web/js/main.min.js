require(["jquery","jquery/ui","mage/translate","mainJs","domReady!"],function(_,e){"use strict";jQuery("#scroll-to-top").click(function(){return jQuery("html, body").animate({scrollTop:0},600,"easeOutCubic"),!1});var I=jQuery(window).width();return _(document).ready(function(){var e=_(".account-cart-wrapper"),t=_("header .block-search");if(I<=768){_("header > .nav-sections").addClass("skip-content"),_(t).addClass("skip-content"),_(".skip-links-wrapper").append(_(e).html()),_("header").append(t);var a=_(".skip-links-wrapper #header-account");_("header").append(a),_(".account-cart-wrapper").remove(),_("header .skip-links-wrapper .minicart-wrapper a.showcart, header .skip-links-wrapper .dropdown-toggle.banderas").click(function(){_("header .skip-links-wrapper .skip-link").removeClass("skip-active"),_("header .skip-links-wrapper .minicart-wrapper a.showcart").removeClass("active")})}var i,p,c,o=_(".skip-content"),r=_(".skip-link");if(r.on("click",function(e){e.preventDefault();var t=_(this),a=t.attr("data-target-element")?t.attr("data-target-element"):t.attr("href"),i=_(a),n=i.hasClass("skip-active")?1:0;r.removeClass("skip-active"),o.removeClass("skip-active"),n?t.removeClass("skip-active"):(t.addClass("skip-active"),i.addClass("skip-active"))}),_(".products-grid .product-items").length){var n=_(".products-grid .product-items > .item"),s=_(n).find(".product-image-wrapper"),d=_(n).find(".product-item-name"),l=_(n).find(".atributo-familia"),u=_(n).find(".product-reviews-summary"),f=_(n).find(".price-box"),h=_(n).find(".swatch-opt"),m=[],y=[],v=[],g=[],k=[],j=[],w=[];setTimeout(function(){jQuery.each(s,function(e,t){y.push(jQuery(t).innerHeight())}),Math.max.apply(Math,y),jQuery(s).css("minHeight",Math.max.apply(Math,y)+"px"),jQuery.each(d,function(e,t){v.push(jQuery(t).innerHeight())}),Math.max.apply(Math,v),jQuery(d).css("minHeight",Math.max.apply(Math,v)+"px"),jQuery.each(l,function(e,t){g.push(jQuery(t).innerHeight())}),Math.max.apply(Math,g),jQuery(l).css("minHeight",Math.max.apply(Math,g)+"px"),jQuery.each(u,function(e,t){k.push(jQuery(t).innerHeight())}),Math.max.apply(Math,k),jQuery(u).css("minHeight",Math.max.apply(Math,k)+"px"),jQuery.each(f,function(e,t){j.push(jQuery(t).innerHeight())}),Math.max.apply(Math,j),jQuery(f).css("minHeight",Math.max.apply(Math,j)+"px"),jQuery.each(h,function(e,t){w.push(jQuery(t).innerHeight())}),Math.max.apply(Math,w),jQuery(h).css("minHeight",Math.max.apply(Math,w)+"px"),jQuery.each(n,function(e,t){m.push(jQuery(t).innerHeight())}),Math.max.apply(Math,m),jQuery(n).css("height",Math.max.apply(Math,m)+"px")},500)}function x(e,a,t){if(_(e).length&&a.length){var i=_(e).val(),n=_(a).find("option");n.length?"text"==t?_.each(n,function(e,t){_(t).text()==i&&(_(t).prop("selected",!0),setTimeout(function(){_(a).trigger("change")},500))}):"val"==t&&_.each(n,function(e,t){_(t).attr("value")==i&&(_(t).prop("selected",!0),setTimeout(function(){_(a).trigger("change")},500))}):console.log("el ws no retornÃ³ opciones para "+_(a).attr("id"))}}function C(r,e){_("body").trigger("processStart"),_(r).find('input[name="postcode"]').parents(".field").hide(),_(r).find('input[name="postcode"]').val("");var s=_(r).find("> .field.street .control .additional .control"),d=_(r).find(e).parent();_(s).find("input").hide(),_(d).find("input").hide(),c=_(r).find('> .field input[name="city"]').parent(),_.ajax({url:"/places/search/",type:"GET",dataType:"json",success:function(t){if(_(p).find("input").length){_(p).find("input").hide();var a='<select id="fieldStateCheckout" class="select" name="state_id" aria-required="true" aria-invalid="false"><option data-title="" value="">'+_.mage.__("Please select a region, state or province.")+"</option>";_.each(t,function(e,t){a+="<option value='' parentid='"+t.Id+"''>"+t.Name+"</option>"}),a+="</select>",0==_(r).find("#fieldStateCheckout").length&&_(p).append(a),x(_(r).find("#region"),_(r).find("#fieldStateCheckout"),"text")}else{var e=_(p).find("select option");_.each(e,function(e,a){var i=_(a).text();_.each(t,function(e,t){t.Name==i&&(_(a).attr("parentId",t.Id),_(a).show())})})}_(c).find("input").hide();var i='<select id="fieldCityCheckout" class="select" name="cities_id" aria-required="true" aria-invalid="false" disabled><option data-title="" value="">'+_.mage.__("Please select a city.")+"</option></select>";0==_(r).find("#fieldCityCheckout").length&&_(c).append(i);var n='<select id="fieldZoneCheckout" class="select" name="zone_id" aria-required="true" aria-invalid="false" disabled><option data-title="" value="">'+_.mage.__("Please select a zone.")+"</option></select>";0==_(r).find("#fieldZoneCheckout").length&&_(d).append(n),_("body").trigger("processStop");var o=_(p).find("select#fieldStateCheckout");_(o).on("change",function(e){_("body").trigger("processStart"),_(r).find('input[name="postcode"]').val(""),_.ajax({url:"/places/search/",data:"parentId="+_(o).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){_(c).find("select").attr("disabled",!1),_(c).find('select option:not([value=""])').remove(),_.each(e,function(e,t){_(c).find("select").append("<option value='"+t.Id+"' parentId='"+t.Id+"'>"+t.Name+"</option>")}),x("#city","#fieldCityCheckout","text"),_("body").trigger("processStop")}}),_(p).find("input").val(_(this).find("option:selected").text()),_(p).find("input").keyup()}),_(r).find("#fieldCityCheckout").on("change",function(e){_("body").trigger("processStart"),_(r).find('input[name="postcode"]').val("");_(c).find("select option:selected");_(c).find("input").val(_(this).find("option:selected").text()),_(c).find("input").keyup(),_.ajax({url:"/places/search/",data:"parentId="+_(this).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){_(d).find("select").attr("disabled",!1),_(d).find("select option").remove(),_(d).find("select").append('<option data-title="" value="" selected>Please select a zone.</option>'),_.each(e,function(e,t){_(d).find("select").append("<option value='"+t.PostalCode+"' parentId='"+t.ParentId+"' postalCode='"+t.PostalCode+"'>"+t.Name+"</option>")}),x("#zone_id","#fieldZoneCheckout","val"),_("body").trigger("processStop")}})}),_(d).find("select").on("change",function(e){_("body").trigger("processStart");var t=_(d).find("select option:selected");_(d).find("input").val(_(this).find("option:selected").text()),_(d).find("input").keyup(),_(s).find("input").val(_(this).find("option:selected").text()),_(s).find("input").keyup(),"null"!=_(t).attr("postalCode")?(_(r).find('input[name="postcode"]').show(),_(r).find('input[name="postcode"]').val(_(t).attr("postalCode"))):(_(r).find('input[name="postcode"]').hide(),_(r).find('input[name="postcode"]').val(_(t).text())),_(r).find('input[name="postcode"]').keyup(),_("body").trigger("processStop")})}})}jQuery(".control-qty").on("click",function(e){var t=jQuery(this),a=t.parent(),i=a.find("input.input-text.qty"),n=parseInt(i.val());t.hasClass("remove")?2<=n&&(i.val(n-1),2==n&&t.addClass("disable")):t.hasClass("add")&&(i.val(n+1),a.find(".remove").removeClass("disable"))}),-1<window.location.href.indexOf("checkout")&&(i=setInterval(function(){p=_('form .fieldset.address input[name="region"]').parent(),1<=_(p).length&&(C("form .fieldset.address",'> .field input[name="custom_attributes[zone_id]"]'),clearInterval(i))},1e3)),-1<window.location.href.indexOf("customer")&&(i=setInterval(function(){p=_('form.form-address-edit .fieldset input[name="region"]').parent(),1<=_(p).length&&(_(".form-address-edit .field-name-firstname").before(_(".field-identification")),C("form.form-address-edit .fieldset",'.field input[name="zone_id"]'),clearInterval(i))},1e3));var b=0;_(document).on("change","[name='billing-address-same-as-shipping']",function(){if(0==_(".field-select-billing select").length){if(b+=1,0==_(this).prop("checked")){var e=_(".payment-method._active .billing-address-form form fieldset.address");p=_(e).find('input[name="region"]').parent(),console.log("fieldStateCheckout "+p),1<=_(p).length&&1==b&&C(e,'> .field input[name="custom_attributes[zone_id]"]')}}else b=0}),_(document).on("change","[name='billing_address_id']",function(){b+=1,p=_('.billing-address-form form fieldset.address input[name="region"]').parent(),b<=1&&C(_(".billing-address-form form fieldset.address"),'> .field input[name="custom_attributes[zone_id]"]')}),_(document).on("change","[name='country_id']",function(){"GT"==_(this).val()?_('input[name="postcode"]').parents(".field").hide():_('input[name="postcode"]').parents(".field").show()});var Q=_("footer a");_.each(Q,function(e,t){if("Zendesk Support"==t.innerText||"Preguntas frecuentes"==t.innerText){var a=_(this).parent();_("footer .footer .footer-nav .second-nav").append(a)}});var M=_(".sticky-product-nav");_(M).length&&(_(".sticky-product-nav").remove(),_(".page-wrapper .page-main>.columns").prepend(M))}),_(document).ajaxComplete(function(){jQuery(".product-options-wrapper .swatch-attribute.jam_color .swatch-attribute-options .swatch-option").hover(function(){var e=jQuery(this).attr("option-label");jQuery(".swatch-attribute-selected-option").text(e)},function(){jQuery(".swatch-attribute-selected-option").text(jQuery(".product-options-wrapper .swatch-attribute.jam_color .swatch-attribute-options .swatch-option.selected").attr("option-label"))})}),jQuery(window).on("scroll",function(){300<jQuery(window).scrollTop()?jQuery("#scroll-to-top").addClass("show"):jQuery("#scroll-to-top").removeClass("show")}),e});