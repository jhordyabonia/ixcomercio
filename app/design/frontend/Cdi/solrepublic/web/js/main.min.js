require(["jquery","jquery/ui","mage/translate","mainJs","domReady!"],function(p,e){"use strict";var o,d=0,s=jQuery(".page-header").outerHeight();return p(document).ready(function(){p(".page-wrapper .page-main").css("paddingTop",s),p("#scroll-to-top").click(function(){return p("html, body").animate({scrollTop:0},600,"easeOutCubic"),!1}),p(".gotoscroll .banner-button").click(function(e){e.preventDefault();var t=jQuery(this).closest("section.banner").attr("class").split(/\s+/),n="";p.each(t,function(e,t){t.match("^class-")?n=t.replace("class-","."):t.match("^id-")&&(n=t.replace("id-","#")),""!=n&&jQuery("html,body").animate({scrollTop:jQuery(n).offset().top-jQuery("header.page-header").outerHeight()},"slow")})}),jQuery(".SOLburger").on("click",function(){jQuery(".SOLburger").hasClass("is-clicked")?jQuery("#sideMenu").animate({right:"-100%"},500):(jQuery("#sideMenu").show(),jQuery("#sideMenu").animate({right:0},500)),jQuery(".SOLburger").toggleClass("is-clicked")}),jQuery(".control-qty").on("click",function(e){var t=jQuery(this),n=t.parent(),i=n.find("input.input-text.qty"),a=parseInt(i.val());t.hasClass("remove")?2<=a&&(i.val(a-1),2==a&&t.addClass("disable")):t.hasClass("add")&&(i.val(a+1),n.find(".remove").removeClass("disable"))}),setInterval(function(){o&&(function(){var e=jQuery(this).scrollTop();if(Math.abs(d-e)<=5)return;d<e&&s<e?jQuery(".page-header").removeClass("nav-down").addClass("nav-up"):e+jQuery(window).height()<jQuery(document).height()&&jQuery(".page-header").removeClass("nav-up").addClass("nav-down");d=e}(),o=!1)},250);var e,l,c,t=p("input.required-entry, select.required-entry");function u(e,n,t){if(p(e).length&&n.length){var i=p(e).val(),a=p(n).find("option");a.length?"text"==t?p.each(a,function(e,t){p(t).text()==i&&(p(t).prop("selected",!0),setTimeout(function(){p(n).trigger("change")},500))}):"val"==t&&p.each(a,function(e,t){p(t).attr("value")==i&&(p(t).prop("selected",!0),setTimeout(function(){p(n).trigger("change")},500))}):console.log("el ws no retornÃ³ opciones para "+p(n).attr("id"))}}function n(d,e){p("body").trigger("processStart"),"GT"==p('[name="country_id"]').val()?p(d).find('input[name="postcode"]').parents(".field").hide():p(d).find('input[name="postcode"]').parents(".field").show(),p(d).find('input[name="postcode"]').val("");var s=p(d).find("> .field.street .control .additional .control"),r=p(d).find(e).parent();p(s).find("input").hide(),p(r).find("input").hide(),c=p(d).find('> .field input[name="city"]').parent(),p.ajax({url:"/places/search/",type:"GET",dataType:"json",success:function(t){if(p(l).find("input").length){p(l).find("input").hide();var n='<select id="fieldStateCheckout" class="select" name="state_id" aria-required="true" aria-invalid="false"><option data-title="" value="">'+p.mage.__("Please select a region, state or province.")+"</option>";p.each(t,function(e,t){n+="<option value='' parentid='"+t.Id+"''>"+t.Name+"</option>"}),n+="</select>",0==p(d).find("#fieldStateCheckout").length&&p(l).append(n),u(p(d).find("#fieldStateCheckout").parent().find("input"),p(d).find("#fieldStateCheckout"),"text")}else{var e=p(l).find("select option");p.each(e,function(e,n){var i=p(n).text();p.each(t,function(e,t){t.Name==i&&(p(n).attr("parentId",t.Id),p(n).show())})})}p(c).find("input").hide();var i='<select id="fieldCityCheckout" class="select" name="cities_id" aria-required="true" aria-invalid="false" disabled><option data-title="" value="">'+p.mage.__("Please select a city.")+"</option></select>";0==p(d).find("#fieldCityCheckout").length&&p(c).append(i);var a='<select id="fieldZoneCheckout" class="select" name="zone_id" aria-required="true" aria-invalid="false" disabled><option data-title="" value="">'+p.mage.__("Please select a zone.")+"</option></select>";0==p(d).find("#fieldZoneCheckout").length&&p(r).append(a),p("body").trigger("processStop");var o=p(l).find("select#fieldStateCheckout");p(o).on("change",function(e){p("body").trigger("processStart"),p(d).find('input[name="postcode"]').val(""),p.ajax({url:"/places/search/",data:"parentId="+p(o).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){p(c).find("select").attr("disabled",!1),p(c).find('select option:not([value=""])').remove(),p.each(e,function(e,t){p(c).find("select").append("<option value='"+t.Id+"' parentId='"+t.Id+"'>"+t.Name+"</option>")}),u("#city","#fieldCityCheckout","text"),p("body").trigger("processStop")}}),p(l).find("input").val(p(this).find("option:selected").text()),p(l).find("input").keyup()}),p(d).find("#fieldCityCheckout").on("change",function(e){p("body").trigger("processStart"),p(d).find('input[name="postcode"]').val("");p(c).find("select option:selected");p(c).find("input").val(p(this).find("option:selected").text()),p(c).find("input").keyup(),p.ajax({url:"/places/search/",data:"parentId="+p(this).find("option:selected").attr("parentId"),type:"GET",dataType:"json",success:function(e){p(r).find("select").attr("disabled",!1),p(r).find("select option").remove(),p(r).find("select").append('<option data-title="" value="" selected>Please select a zone.</option>'),p.each(e,function(e,t){p(r).find("select").append("<option value='"+t.PostalCode+"' parentId='"+t.ParentId+"' postalCode='"+t.PostalCode+"'>"+t.Name+"</option>")}),u("#zone_id","#fieldZoneCheckout","val"),p("body").trigger("processStop")}})}),p(r).find("select").on("change",function(e){p("body").trigger("processStart");var t=p(r).find("select option:selected");p(r).find("input").val(p(this).find("option:selected").text()),p(r).find("input").keyup(),p(s).find("input").val(p(this).find("option:selected").text()),p(s).find("input").keyup(),"null"!=p(t).attr("postalCode")?(p(d).find('input[name="postcode"]').show(),p(d).find('input[name="postcode"]').val(p(t).attr("postalCode"))):(p(d).find('input[name="postcode"]').hide(),p(d).find('input[name="postcode"]').val(p(t).text())),p(d).find('input[name="postcode"]').keyup(),p("body").trigger("processStop")})}})}p.each(t,function(e,t){p(t).parents(".field").hasClass("required")||p(t).parents(".field").addClass("required")}),p("body").hasClass("checkout-index-index")&&(e=setInterval(function(){l=p('form .fieldset.address input[name="region"]').parent(),1<=p(l).length&&(n("form .fieldset.address",'> .field input[name="custom_attributes[zone_id]"]'),clearInterval(e))},1e3)),p("body").hasClass("checkout-cart-index")&&(e=setInterval(function(){l=p('form .fieldset.estimate input[name="region"]').parent(),1<=p(l).length&&(n("form .fieldset.estimate",'> .field input[name="custom_attributes[zone_id]"]'),clearInterval(e))},1e3)),-1<window.location.href.indexOf("customer")&&(e=setInterval(function(){l=p('form.form-address-edit .fieldset input[name="region"]').parent(),1<=p(l).length&&(p(".form-address-edit .field-name-firstname").before(p(".field-identification")),p(".form-address-edit .field-zone_id").after(p(".field.zip")),n("form.form-address-edit .fieldset",'.field input[name="zone_id"]'),clearInterval(e))},1e3));var i=0;p(document).on("change","[name='billing-address-same-as-shipping']",function(){if(0==p(".field-select-billing select").length){if(i+=1,0==p(this).prop("checked")){var e=p(".payment-method._active .billing-address-form form fieldset.address");l=p(e).find('input[name="region"]').parent(),console.log("fieldStateCheckout "+l),1<=p(l).length&&1==i&&n(e,'> .field input[name="custom_attributes[zone_id]"]')}}else i=0}),p(document).on("change","[name='billing_address_id']",function(){i+=1,l=p('.billing-address-form form fieldset.address input[name="region"]').parent(),i<=1&&n(p(".billing-address-form form fieldset.address"),'> .field input[name="custom_attributes[zone_id]"]')}),p(document).on("change","[name='country_id']",function(){"GT"==p(this).val()?p('input[name="postcode"]').parents(".field").hide():p('input[name="postcode"]').parents(".field").show()});var a=p("footer a");p.each(a,function(e,t){if("Zendesk Support"==t.innerText||"Preguntas frecuentes"==t.innerText){var n=p(this).parent();p("footer .footer-resources ul").append(n)}})}),jQuery(window).scroll(function(e){o=!0}),p(document).ajaxComplete(function(){jQuery(".product-essential .swatch-attribute-options .swatch-option").hover(function(){var e=jQuery(this).attr("option-label");jQuery(".swatch-attribute-selected-option").text(e)},function(){jQuery(".swatch-attribute-selected-option").text(jQuery(".product-essential .swatch-attribute-options .swatch-option.selected").attr("option-label"))})}),jQuery(window).on("scroll",function(){300<jQuery(window).scrollTop()?jQuery("#scroll-to-top").addClass("show"):jQuery("#scroll-to-top").removeClass("show")}),e});